---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import lang from "../../data/lang.json";

const currentLang = "ru"; // или "en", можно динамически менять
const socialLinks = [
  { href: "https://github.com/adamlean", icon: "fab fa-github" },
  { href: "https://t.me/dg404_bot", icon: "fa-brands fa-telegram" },
  { href: "https://www.behance.net/adamlean92", icon: "fab fa-behance" },
  {
    href: "https://soundcloud.com/mastamonk36",
    icon: "fa-brands fa-soundcloud",
  },
];

// Загружаем посты для конкретного языка
const posts = (await Astro.glob(`../../content/${currentLang}/blog/*.md`)).sort(
  (a, b) => new Date(b.frontmatter.date) - new Date(a.frontmatter.date)
);
---

<Layout title={`${lang[currentLang].blogTitle} | Адам Лин`}>
  <Header menu={lang[currentLang].menu} />

  <main class="content">
    <section class="latest-posts">
      <div class="container">
        <div class="posts-grid">
          {
            posts.map((post) => (
              <article class="post-card">
                <img
                  src={post.frontmatter.image}
                  alt={post.frontmatter.title}
                  class="post-image"
                />
                <div class="post-content">
                  <span class="post-tag">{post.frontmatter.tag}</span>
                  <h3 class="post-title">
                    <a href={post.url}>{post.frontmatter.title}</a>
                  </h3>
                  <div class="post-meta">
                    <img
                      src={post.frontmatter.avatar}
                      alt={post.frontmatter.author}
                      class="post-avatar"
                    />
                    <span class="post-author">{post.frontmatter.author}</span>
                    <span class="post-date">{post.frontmatter.date}</span>
                  </div>
                </div>
              </article>
            ))
          }
        </div>
      </div>
    </section>
  </main>

  <Footer socialLinks={socialLinks} author="Адам Лин" />
</Layout>
